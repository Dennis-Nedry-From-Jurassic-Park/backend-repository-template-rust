# https://github.com/pascalgn/automerge-action
name: "Automerge"
on:
  workflow_run:
    workflows: ["Security audit", "Cargo Check & Build & Test"]
    types:
      - completed
#on:
#  pull_request:
#    types:
#      - labeled
#      - unlabeled
#      - synchronize
#      - opened
#      - edited
#      - ready_for_review
#      - reopened
#      - unlocked

  check_suite:
    types:
      - completed
  status: {}
jobs:
  automerge:
    runs-on: ubuntu-latest
    needs:
      - check
      - coverage
      - security_audit
      - build_and_test
    steps:
      - id: automerge
        name: automerge
        uses: "pascalgn/automerge-action@v0.15.2"

        env:
          GITHUB_TOKEN: "${{ secrets.TOKEN }}"
          LOG: "DEBUG"
          MERGE_ERROR_FAIL: true
          MERGE_LABELS: ""
          MERGE_METHOD_LABEL_REQUIRED: false
          MERGE_FILTER_AUTHOR: "Dennis-Nedry-From-Jurassic-Park"